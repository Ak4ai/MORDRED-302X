    <!DOCTYPE html>
    <html lang="en">
    <head>
        <link rel="icon" type="image/png" href="android-icon-192x192.png">
        <link rel="manifest" href="manifest.json">
        <link rel="stylesheet" href="style.css?v=1.0.6">
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>M.O.R.D.R.E.D-302X</title>
        <meta name="theme-color" content="#29243e"> <!-- Android -->
        <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"> <!-- iOS -->
        <style>
            body {
                font-family: 'Open Sans', sans-serif;
            }
        </style>
        <meta http-equiv="Content-Security-Policy" content="
        default-src 'self';
        script-src 
          'self' 
          'unsafe-inline' 
          'unsafe-eval' 
          blob: 
          data: 
          https://apis.google.com 
          https://www.gstatic.com 
          https://accounts.google.com 
          https://cdn.jsdelivr.net 
          https://unpkg.com 
          https://www.youtube.com;
        style-src 
          'self' 
          'unsafe-inline' 
          https://cdnjs.cloudflare.com;
        font-src 
          'self' 
          https://cdnjs.cloudflare.com;
        connect-src 
          https://www.googleapis.com 
          https://accounts.google.com 
          https://oauth2.googleapis.com 
          ws://127.0.0.1:5501 
          https://backmordred.vercel.app 
          https://apis.google.com 
          https://www.google.com 
          https://firestore.googleapis.com 
          https://www.youtube.com;
        img-src 
          'self' 
          https://i.pinimg.com 
          https://csi.gstatic.com 
          https://lh3.googleusercontent.com 
          https://media.discordapp.net 
          https://i.ytimg.com 
          https://via.placeholder.com 
          data:;
        frame-src 
          https://accounts.google.com 
          https://content.googleapis.com 
          https://content-people.googleapis.com 
          https://www.youtube.com 
          https://www.youtube-nocookie.com;
      ">

        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

        <!-- Firebase App -->
        <script type="module">
            import { initializeApp } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js";
            // e continue seu código aqui
        </script>
        <!-- Firestore -->
        <script type="module">
            import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-app.js";
            import {
              getFirestore, doc, setDoc, updateDoc, onSnapshot
            } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore.js";        </script>
        <!-- Firebase Archive -->
        <script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-app-compat.js"></script>
        <script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore-compat.js"></script>
        
        <script>
          const firebaseConfig = {
            apiKey: "AIzaSyBTqNSXSGTD0uA7GtjdF-6oQsETq61YgUs",
            authDomain: "mordred-f7ea1.firebaseapp.com",
            projectId: "mordred-f7ea1",
            storageBucket: "mordred-f7ea1.firebasestorage.app",
            messagingSenderId: "248130349710",
            appId: "1:248130349710:web:b2b3b0af3528627de7f7df",
            measurementId: "G-GC5Z4S28R2"
          };
        
          const app = firebase.initializeApp(firebaseConfig);
          const db = firebase.firestore();
          const videoDocRef = db.collection("sync").doc("videoStatus"); // Compatível com compat
          console.log("Firebase (compat) carregado com sucesso!");
          
        </script>
        <script src="https://www.youtube.com/iframe_api"></script>
        <!-- Math.js -->
        <script src="https://unpkg.com/mathjs@11.8.2/lib/browser/math.js"></script>

        <!-- Random.js -->
        <script src="https://cdn.jsdelivr.net/npm/random-js@2.1.0/dist/random-js.umd.min.js"></script>

        <!-- RPG Dice Roller (versão UMD) -->
        <script src="https://cdn.jsdelivr.net/npm/@dice-roller/rpg-dice-roller@5.5.1/lib/umd/bundle.min.js"></script>

        <!-- Seu script do chat -->
        <script src="./chat.js"></script>
    </head>
  <body>
    <script>
      if ('serviceWorker' in navigator) {
        window.addEventListener('load', function() {
          navigator.serviceWorker.register('/service-worker.js').then(function(registration) {
            console.log('ServiceWorker registration successful with scope: ', registration.scope);
          }, function(error) {
            console.log('ServiceWorker registration failed: ', error);
          });
        });
      }
    </script>
    <div id="blur-background"></div>
    <div id="popup-alert">
        <span id="popup-alert-text"></span>
    </div>  
    <div id="custom-dialog" class="dialog-container" style="display: none;">
        <div class="dialog-message" id="dialog-message"></div>
        <div class="dialog-buttons">
            <button id="dialog-ok-button">OK</button>
        </div>
    </div>
    <div id="pull-up-indicator"></div>
    <div id="black-overlay"></div>
    <div id="mapa-container">
        <div id="tabuleiro-wrapper">
            <div id="tabuleiro-inner">
                <div id="tabuleiro-bg"></div> <!-- A imagem de fundo vem ANTES da grid -->
                <div id="tabuleiro"></div> <!-- Apenas a grid -->
                <div id="token-layer"></div> <!-- Tokens ficam aqui -->
            </div>
        </div>
    </div>      
    <button id="togglecontainer"class="toggle-container"><i class="fa-solid fa-arrows-to-eye"></i></button>
    <!-- Container da barra de fichas -->
    <div id="barra-fichas"></div>
    <div id="zoom-controls">
        <button id="zoom-in"><i class="fa-solid fa-plus"></i></button>
        <button id="zoom-out"><i class="fa-solid fa-minus"></i></button>
    </div> 
    <button id="toggle-bg-interaction"><i class="fa-solid fa-map-location-dot"></i></button>     
    <button id="toggle-barreira-opacity"><i class="fa-solid fa-xmarks-lines"></i></button>
    <div class="player-container">
        <div id="togglevideoPlayer" class="togglevideo-button"><i class="fa-solid fa-chevron-down"></i></div>
    
        <!-- Novo agrupamento -->
        <div class="link-and-button">
            <input type="text" id="youtubeLink" placeholder="Cole o link do YouTube aqui" />
            <button id="loadVideo"><i class="fa-solid fa-magnifying-glass"></i></button>
        </div>
    
        <div id="youtubePlayer"></div>
    
        <!-- Controles -->
        <div id="controls">
            <button id="playPauseButton"><i class="fa-solid fa-play"></i></button>
            <button id="unskipButton"><i class="fa-solid fa-backward-step"></i></button>
            <button id="skipButton"><i class="fa-solid fa-forward-step"></i></button>
        </div>
        <div id="videoQueueDisplay" class="queue-container">
            <h4>Fila de Vídeos:</h4>
            <ul id="videoQueueList"></ul>
        </div>          
        <div id="volumeContainer">
            <input type="range" id="volumeControl" min="0" max="100" step="1" value="0" />
        </div>
    </div>    
    <div id="chat-container">
        <div id="chat-mensagens"></div>
        <div id="chat-input-container">
            <input type="text" id="chat-input" placeholder="Digite sua mensagem...">
            <button id="chat-enviar"><i class="fa-solid fa-play"></i></button>
        </div>
    </div>      
    <div id="essential-info" class="hidden">
        <div class="top-section">
          <img id="status-img" alt="Essential Info Image">
          <img id="status-token" alt="Essentia Info Token">
          <div class="text-section">
            <h2 id="status-nome"></h2>
          </div>
        </div>
      
        <div class="status-item">
          <div class="status-label">
            <label>Vida:</label>
            <span id="status-vida1">0 / 100</span>
          </div>
          <div class="status-bar">
            <div class="status-bar-fill" id="status-bar-vida1" style="width: 0%;"></div>
          </div>
        </div>
        <div class="status-item">
          <div class="status-label">
            <label>Éter:</label>
            <span id="status-eter1">0 / 100</span>
          </div>
          <div class="status-bar">
            <div class="status-bar-fill" id="status-bar-eter1" style="width: 0%;"></div>
          </div>
        </div>
        <div class="status-item">
          <div class="status-label">
            <label>Sanidade:</label>
            <span id="status-sanidade1">0 / 100</span>
          </div>
          <div class="status-bar">
            <div class="status-bar-fill" id="status-bar-sanidade1" style="width: 0%;"></div>
          </div>
        </div>
        <div class="status-item">
            <div class="status-label">
              <label>Defesa:</label>
              <span id="status-defesa1">0 / 100</span>
            </div>
            <div class="status-bar">
              <div class="status-bar-fill" id="status-bar-defesa1" style="width: 0%;"></div>
            </div>
        </div>
    </div>         
    <div id="essential-info2" class="hidden">
        <h3>Anotações:</h3>
        <div class="textarea-wrapper">
          <textarea id="anotacoes" placeholder="Escreva suas anotações aqui..." onchange="salvarAnotacoes()"></textarea>
        </div>
    </div>         
    <div id="deviceready" class="blink"></div>
    <div class="container">
        <button id="togglecontainer1"class="toggle-container"><i class="fa-solid fa-arrows-to-eye"></i></button>

        <div class="tabs">
            <div class="tab active" onclick="openTab('info')">Info</div>
            <div class="tab" onclick="openTab('skills')">Skills</div>
            <div class="tab" onclick="openTab('actions')">Actions</div>
            <div class="tab" onclick="openTab('inventory')">Inventory</div>
            <div class="tab" onclick="openTab('config')">Config</div>
        </div>  
        
        <div id="info" class="content active">
            <h1>Status do Personagem</h1>
            <div class="status-info">
                <div class="status-column">
                  <h2>Status Base</h2>
                  <div class="status-item">
                      <div class="status-label">
                          <label>Vida:</label>
                          <span id="status-vida">0 / 100</span>
                      </div>
                      <div class="status-bar">
                          <div class="status-bar-fill" id="status-bar-vida" style="width: 0%;"></div>
                      </div>
                  </div>
                  <div class="status-item">
                      <div class="status-label">
                          <label>Éter:</label>
                          <span id="status-eter">0 / 100</span>
                      </div>
                      <div class="status-bar">
                          <div class="status-bar-fill" id="status-bar-eter" style="width: 0%;"></div>
                      </div>
                  </div>
                  <div class="status-item">
                      <div class="status-label">
                          <label>Sanidade:</label>
                          <span id="status-sanidade">0 / 100</span>
                      </div>
                      <div class="status-bar">
                          <div class="status-bar-fill" id="status-bar-sanidade" style="width: 0%;"></div>
                      </div>
                  </div>
                  <div class="status-item">
                      <div class="status-label">
                        <label>Defesa:</label>
                        <span id="status-defesa">0 / 100</span>
                      </div>
                      <div class="status-bar">
                        <div class="status-bar-fill" id="status-bar-defesa" style="width: 0%;"></div>
                      </div>
                  </div>
                </div>
                <div class="status-column3">
                  <h2>Atributos</h2>
                  <div class="atributos-grid">
                      <div class="atributo-item">
                          <label>Vigor:</label>
                          <span id="status-vigor"></span>
                      </div>
                      <div class="atributo-item">
                          <label>Força:</label>
                          <span id="status-força"></span>
                      </div>
                      <div class="atributo-item">
                          <label>Destreza:</label>
                          <span id="status-destreza"></span>
                      </div>
                      <div class="atributo-item">
                          <label>Inteligencia:</label>
                          <span id="status-inteligencia"></span>
                      </div>
                      <div class="atributo-item">
                          <label>Espiritualidade:</label>
                          <span id="status-espiritualidade"></span>
                      </div>
                  </div>
              </div>
            </div>
            <div class="status-pericias">
                <h2 class="collapsible" onclick="togglePericias()">Perícias</h2>
                <div class="status-info2 content-collapsed" id="pericias-content">
              
                  <!-- Físicas/Combate -->
                  <div class="Labelpericia"><label>Físicas/Combate</label></div>
                  <div class="status-column2">
                    <div class="status-item">
                      <label>Acrobacia:</label>
                      <span id="status-pericia-acrobacia">0</span>
                      <p>Seu controle corporal e capacidade de fazer movimentos difíceis.</p>
                    </div>
                    <div class="status-item">
                      <label>Luta:</label>
                      <span id="status-pericia-luta">0</span>
                      <p>Sua experiência em combates corpo a corpo.</p>
                    </div>
                    <div class="status-item">
                      <label>Pontaria:</label>
                      <span id="status-pericia-pontaria">0</span>
                      <p>Capacidade de acertar seu alvo a distância.</p>
                    </div>
                  </div>
                  <div class="status-column2">
                    <div class="status-item">
                      <label>Bloqueio:</label>
                      <span id="status-pericia-bloqueio">0</span>
                      <p>Habilidade para bloquear ataques.</p>
                    </div>
                    <div class="status-item">
                      <label>Reflexos:</label>
                      <span id="status-pericia-reflexos">0</span>
                      <p>Velocidade de percepção e reação.</p>
                    </div>
                  </div>
              
                  <!-- Misticismo -->
                  <div class="Labelpericia"><label>Misticismo</label></div>
                  <div class="status-column2">
                    <div class="status-item">
                      <label>Rituais:</label>
                      <span id="status-pericia-rituais">0</span>
                      <p>Sua capacidade de compreender e realizar rituais.</p>
                    </div>
                    <div class="status-item">
                      <label>Criptozoologia:</label>
                      <span id="status-pericia-criptozoologia">0</span>
                      <p>Compreensão sobre seres sobrenaturais.</p>
                    </div>
                  </div>
                  <div class="status-column2">
                    <div class="status-item">
                      <label>Simbolismo:</label>
                      <span id="status-pericia-simbolismo">0</span>
                      <p>Conhecimento sobre símbolos e sinais.</p>
                    </div>
                    <div class="status-item">
                      <label>Intuição:</label>
                      <span id="status-pericia-intuicao">0</span>
                      <p>Perceber aspectos paranormais e sentir perigo.</p>
                    </div>
                  </div>
              
                  <!-- Acadêmicas -->
                  <div class="Labelpericia"><label>Acadêmicas</label></div>
                  <div class="status-column2">
                    <div class="status-item">
                      <label>Psicologia:</label>
                      <span id="status-pericia-psicologia">0</span>
                      <p>Entender pessoas e ajudá-las com problemas psicológicos.</p>
                    </div>
                    <div class="status-item">
                      <label>Educação Geral:</label>
                      <span id="status-pericia-educacao-geral">0</span>
                      <p>Conhecimentos básicos sobre ciências e humanas.</p>
                    </div>
                  </div>
                  <div class="status-column2">
                    <div class="status-item">
                      <label>Linguagens:</label>
                      <span id="status-pericia-linguagens">0</span>
                      <p>Decodificar textos e aprender novos idiomas.</p>
                    </div>
                    <div class="status-item">
                      <label>Medicina:</label>
                      <span id="status-pericia-medicina">0</span>
                      <p>Diagnosticar e tratar doenças.</p>
                    </div>
                    <div class="status-item">
                      <label>Educação Superior:</label>
                      <span id="status-pericia-educacao-superior">0</span>
                      <p>Especialidade em História, Teologia, Geografia ou Política.</p>
                    </div>
                  </div>
              
                  <!-- Criação -->
                  <div class="Labelpericia"><label>Criação</label></div>
                  <div class="status-column2">
                    <div class="status-item">
                      <label>Alquimia:</label>
                      <span id="status-pericia-alquimia">0</span>
                      <p>Manuseio de ervas e substâncias químicas.</p>
                    </div>
                    <div class="status-item">
                      <label>Artesanato/Engenharia:</label>
                      <span id="status-pericia-artesanato-engenharia">0</span>
                      <p>Forja e criação de máquinas e itens.</p>
                    </div>
                  </div>
                  <div class="status-column2">
                    <div class="status-item">
                      <label>Culinária:</label>
                      <span id="status-pericia-culinaria">0</span>
                      <p>Preparo de refeições e recuperação de atributos.</p>
                    </div>
                  </div>
              
                  <!-- Interpessoais -->
                  <div class="Labelpericia"><label>Interpessoais</label></div>
                  <div class="status-column2">
                    <div class="status-item">
                      <label>Persuasão:</label>
                      <span id="status-pericia-persuasao">0</span>
                      <p>Convencer e dialogar com outras pessoas.</p>
                    </div>
                    <div class="status-item">
                      <label>Intimidação:</label>
                      <span id="status-pericia-intimidacao">0</span>
                      <p>Ameaças e controle por medo.</p>
                    </div>
                  </div>
                  <div class="status-column2">
                    <div class="status-item">
                      <label>Enganação:</label>
                      <span id="status-pericia-enganacao">0</span>
                      <p>Enganar, mentir ou disfarçar intenções.</p>
                    </div>
                  </div>
              
                  <!-- Ambiente -->
                  <div class="Labelpericia"><label>Ambiente</label></div>
                  <div class="status-column2">
                    <div class="status-item">
                      <label>Investigação:</label>
                      <span id="status-pericia-investigacao">0</span>
                      <p>Descobrir pistas e informações escondidas.</p>
                    </div>
                    <div class="status-item">
                      <label>Sobrevivência:</label>
                      <span id="status-pericia-sobrevivencia">0</span>
                      <p>Rastrear, acampar e sobreviver na natureza.</p>
                    </div>
                  </div>
                  <div class="status-column2">
                    <div class="status-item">
                      <label>Percepção:</label>
                      <span id="status-pericia-percepcao">0</span>
                      <p>Ouvir sons sutis, ver detalhes e detectar cheiros.</p>
                    </div>
                    <div class="status-item">
                      <label>Lidar com Animais:</label>
                      <span id="status-pericia-lidar-com-animais">0</span>
                      <p>Domesticar, acalmar ou evitar ataques.</p>
                    </div>
                  </div>
              
                  <!-- Crime -->
                  <div class="Labelpericia"><label>Crime</label></div>
                  <div class="status-column2">
                    <div class="status-item">
                      <label>Furtividade:</label>
                      <span id="status-pericia-furtividade">0</span>
                      <p>Esconder-se e evitar olhares.</p>
                    </div>
                    <div class="status-item">
                      <label>Prestidigitação:</label>
                      <span id="status-pericia-prestidigitacao">0</span>
                      <p>Furtos, truques e arrombamentos.</p>
                    </div>
                  </div>
              
                  <!-- Extras (estas não são atualizadas pelo JS atual) -->
                  <div class="status-column2">
                    <div class="status-item">
                      <label>Fraude:</label>
                      <span>0</span>
                      <p>Falsificar documentos e aplicar golpes.</p>
                    </div>
                  </div>
                  <div class="Labelpericia"><label>Coordenação</label></div>
                  <div class="status-column2">
                    <div class="status-item">
                      <label>Performance:</label>
                      <span>0</span>
                      <p>Atuação, música e apresentações.</p>
                    </div>
                  </div>
                  <div class="Labelpericia"><label>Resistência</label></div>
                  <div class="status-column2">
                    <div class="status-item">
                      <label>Constituição:</label>
                      <span>0</span>
                      <p>Resistência física e imunidade.</p>
                    </div>
                  </div>
                  <div class="status-column2">
                    <div class="status-item">
                      <label>Vontade:</label>
                      <span>0</span>
                      <p>Força mental e resistência a influência externa.</p>
                    </div>
                  </div>
              
                </div>
            </div>                   
            <div class="status-tracos">
                <h2 class="collapsible" onclick="toggleTracos()">Traços</h2>
                  <div class="status-info2 content-collapsed" id="tracos-content">
                    <div class="status-column2">
                          <div class="status-item">
                              <label>Raiz:</label>
                              <span id="status-traco-raiz"></span>
                          </div>
                          <div class="status-item">
                              <label>Subraiz:</label>
                              <span id="status-traco-subraiz"></span>
                          </div>
                          <div class="status-item">
                              <label>Defeitos:</label>
                              <span id="status-traco-defeitos"></span>
                          </div>
                          <div class="status-item">
                              <label>Efeitos:</label>
                              <span id="status-traco-efeitos"></span>
                          </div>
                      </div>
                      <div class="status-column2">
                          <div class="status-item">
                              <label>Corpo:</label>
                              <span id="status-traco-corpo"></span>
                          </div>
                          <div class="status-item">
                              <label>Peso:</label>
                              <span id="status-traco-peso"></span>
                          </div>
                            <div class="status-item">
                                <label>Raça:</label>
                                <span id="status-traco-raca"></span>
                            </div>
                            <div class="status-item">
                                <label>Cultura:</label>
                                <span id="status-traco-cultura"></span>
                            </div>
                        </div>
                        <div class="status-column4">
                            
                            <label>História:</label><br><br>
                            <div class="status-item">
                                <span id="status-traco-historia"></span>
                            </div>
                        </div>
                  </div>
              </div>
            </div>
        <!-- Skills Section with Subtabs -->
        <div id="skills" class="content">
            <div class="subtabs">
                <div class="subtab active" onclick="openSubtab('skills', 'habilidades')">Habilidades</div>
                <div class="subtab" onclick="openSubtab('skills', 'escolha')">Escolha</div>
            </div>
            <div id="escolha" class="subcontent">
                <h2>Escolha uma habilidade:</h2>
                <div id="escolha-habilidades">
                </div>
            </div>
            <div id="habilidades" class="subcontent active">
                <h2 id="habilidade-nome"></h2>
                <p id="habilidade-descricao"></p>
                <div id="botoes-habilidade">
                    <button id="usar-habilidade" onclick="usarHabilidade()">Usar Habilidade</button>
                    <button onclick="sair()">Sair</button>
                </div>
                <div id="dano-total"></div>
                <div id="teste-habilidade"></div>
                <br>
                <div id="status">
                    <!-- Aqui será inserido o status dinamicamente -->
                </div>
                <p id="texto-nenhuma-habilidade" style="display: none;">Escolha uma habilidade na aba Escolha</p>
            </div>                
        </div>

        <div id="config" class="content">
            <div class="subtabs">
                <div class="subtab active" onclick="openSubtab('config', 'status1')">Status</div>
                <div class="subtab" onclick="openSubtab('config', 'habilidades1')">Skills</div>
                <div class="subtab" onclick="openSubtab('config', 'habilidades2')">SaveData</div>
                <div class="subtab" onclick="openSubtab('config', 'Google')">Google</div>
            </div>
            <div id="status1" class="subcontent active">
                <div id="toggle-atualizar">
                    <label class="switch">
                        <input type="checkbox" id="atualizar-checkbox">
                        <span class="slider round"></span>
                    </label>
                    <span class="toggle-label">Atualizar</span>
                </div>
                <h2>Atualizar Status</h2>
                <form id="status-form">

                <!-- Identificação -->
                <fieldset>
                    <legend>Identificação</legend>
                    <label for="nome">Nome do Personagem:</label>
                    <input type="text" id="nome" name="nome" required><br>

                    <label for="img">Imagem do Personagem:</label>
                    <input type="text" id="img" name="imagem" required><br>

                    <label for="token">Token do Personagem:</label>
                    <input type="text" id="token" name="token" required>
                </fieldset>

                <!-- Atributos -->
                <fieldset>
                    <legend>Atributos</legend>
                    <label for="vida">Vida:</label>
                    <input type="number" id="vida" name="vida" min="0">

                    <label for="vidaMax">Vida Max:</label>
                    <input type="number" id="vidaMax" name="vidaMax" min="0"><br>

                    <label for="eter">Éter:</label>
                    <input type="number" id="eter" name="eter" min="0">

                    <label for="eterMax">Éter Max:</label>
                    <input type="number" id="eterMax" name="eterMax" min="0"><br>

                    <label for="sanidade">Sanidade:</label>
                    <input type="number" id="sanidade" name="sanidade" min="0">

                    <label for="sanidadeMax">Sanidade Max:</label>
                    <input type="number" id="sanidadeMax" name="sanidadeMax" min="0"><br>

                    <label for="defesa">Defesa:</label>
                    <input type="number" id="defesa" name="defesa" min="0">

                    <label for="defesaMax">Defesa Max:</label>
                    <input type="number" id="defesaMax" name="defesaMax" min="0">
                </fieldset>

                <!-- Atributos Base -->
                <fieldset>
                    <legend>Atributos Base</legend>
                    <label for="forca">Força:</label>
                    <input type="number" id="forca" name="forca" min="0"><br>

                    <label for="destreza">Destreza:</label>
                    <input type="number" id="destreza" name="destreza" min="0"><br>

                    <label for="inteligencia">Inteligência:</label>
                    <input type="number" id="inteligencia" name="inteligencia" min="0"><br>

                    <label for="espiritualidade">Espiritualidade:</label>
                    <input type="number" id="espiritualidade" name="espiritualidade" min="0"><br>

                    <label for="vigor">Vigor:</label>
                    <input type="number" id="vigor" name="vigor" min="0"><br>
                </fieldset>

                <!-- Perícias Físicas / Combate -->
                <fieldset>
                    <legend>Perícias: Físicas / Combate</legend>
                    <label for="acrobacia">Acrobacia:</label>
                    <input type="number" id="acrobacia" name="acrobacia" min="0"><br>

                    <label for="luta">Luta:</label>
                    <input type="number" id="luta" name="luta" min="0"><br>

                    <label for="pontaria">Pontaria:</label>
                    <input type="number" id="pontaria" name="pontaria" min="0"><br>

                    <label for="bloqueio">Bloqueio:</label>
                    <input type="number" id="bloqueio" name="bloqueio" min="0"><br>

                    <label for="reflexos">Reflexos:</label>
                    <input type="number" id="reflexos" name="reflexos" min="0">
                </fieldset>

                <!-- Perícias de Misticismo -->
                <fieldset>
                    <legend>Perícias: Misticismo</legend>
                    <label for="rituais">Rituais:</label>
                    <input type="number" id="rituais" name="rituais" min="0"><br>

                    <label for="criptozoologia">Criptozoologia:</label>
                    <input type="number" id="criptozoologia" name="criptozoologia" min="0"><br>

                    <label for="simbolismo">Simbolismo:</label>
                    <input type="number" id="simbolismo" name="simbolismo" min="0"><br>

                    <label for="intuicao">Intuição:</label>
                    <input type="number" id="intuicao" name="intuicao" min="0">
                </fieldset>

                <!-- Perícias Acadêmicas -->
                <fieldset>
                    <legend>Perícias: Acadêmicas</legend>
                    <label for="psicologia">Psicologia:</label>
                    <input type="number" id="psicologia" name="psicologia" min="0"><br>

                    <label for="educacaoGeral">Educação Geral:</label>
                    <input type="number" id="educacaoGeral" name="educacaoGeral" min="0"><br>

                    <label for="linguagens">Linguagens:</label>
                    <input type="number" id="linguagens" name="linguagens" min="0"><br>

                    <label for="medicina">Medicina:</label>
                    <input type="number" id="medicina" name="medicina" min="0"><br>

                    <label for="educacaoSuperior">Educação Superior:</label>
                    <input type="number" id="educacaoSuperior" name="educacaoSuperior" min="0">
                </fieldset>

                <!-- Perícias de Criação -->
                <fieldset>
                    <legend>Perícias: Criação</legend>
                    <label for="alquimia">Alquimia:</label>
                    <input type="number" id="alquimia" name="alquimia" min="0"><br>

                    <label for="artesanatoEngenharia">Artesanato / Engenharia:</label>
                    <input type="number" id="artesanatoEngenharia" name="artesanatoEngenharia" min="0"><br>

                    <label for="culinaria">Culinária:</label>
                    <input type="number" id="culinaria" name="culinaria" min="0">
                </fieldset>

                <!-- Perícias Interpessoais -->
                <fieldset>
                    <legend>Perícias: Interpessoais</legend>
                    <label for="persuasao">Persuasão:</label>
                    <input type="number" id="persuasao" name="persuasao" min="0"><br>

                    <label for="intimidacao">Intimidação:</label>
                    <input type="number" id="intimidacao" name="intimidacao" min="0"><br>

                    <label for="enganacao">Enganação:</label>
                    <input type="number" id="enganacao" name="enganacao" min="0">
                </fieldset>

                <!-- Perícias de Ambiente -->
                <fieldset>
                    <legend>Perícias: Ambiente</legend>
                    <label for="investigacao">Investigação:</label>
                    <input type="number" id="investigacao" name="investigacao" min="0"><br>

                    <label for="sobrevivencia">Sobrevivência:</label>
                    <input type="number" id="sobrevivencia" name="sobrevivencia" min="0"><br>

                    <label for="percepcao">Percepção:</label>
                    <input type="number" id="percepcao" name="percepcao" min="0"><br>

                    <label for="lidarComAnimais">Lidar com Animais:</label>
                    <input type="number" id="lidarComAnimais" name="lidarComAnimais" min="0">
                </fieldset>

                <!-- Perícias de Crime -->
                <fieldset>
                    <legend>Perícias: Crime</legend>
                    <label for="furtividade">Furtividade:</label>
                    <input type="number" id="furtividade" name="furtividade" min="0"><br>

                    <label for="prestidigitacao">Prestidigitação:</label>
                    <input type="number" id="prestidigitacao" name="prestidigitacao" min="0">
                </fieldset>

                <!-- Traços -->
                <fieldset>
                    <legend>Traços</legend>
                    <label for="tracoRaiz">Traço Raiz:</label>
                    <input type="text" id="tracoRaiz" name="tracoRaiz"><br>

                    <label for="tracoSubraiz">Traço Subraiz:</label>
                    <input type="text" id="tracoSubraiz" name="tracoSubraiz"><br>

                    <label for="tracoRaca">Traço Raça:</label>
                    <input type="text" id="tracoRaca" name="tracoRaca"><br>

                    <label for="tracoCultura">Traço Cultura:</label>
                    <input type="text" id="tracoCultura" name="tracoCultura"><br>

                    <label for="tracoCorpo">Traço Corpo:</label>
                    <input type="text" id="tracoCorpo" name="tracoCorpo"><br>

                    <label for="tracoDefeitos">Traço Defeitos:</label>
                    <input type="text" id="tracoDefeitos" name="tracoDefeitos"><br>

                    <label for="tracoEfeitos">Traço Efeitos:</label>
                    <input type="text" id="tracoEfeitos" name="tracoEfeitos"><br>

                    <label for="tracoPeso">Traço Peso:</label>
                    <input type="text" id="tracoPeso" name="tracoPeso"><br>

                    <label for="tracoHistoria">Traço História:</label>
                    <textarea id="tracoHistoria" name="tracoHistoria"></textarea>
                </fieldset>

                <!-- Inicialização -->
                <fieldset>
                    <legend>Inicialização</legend>
                    <label for="personagemInicial">Personagem de Inicialização:</label>
                    <input type="checkbox" id="personagemInicial" name="personagemInicial">
                </fieldset>

                <br>
                <button type="button" onclick="salvarStatus()">Salvar</button>
                </form>

                <h2>Carregar Status</h2>
                <label for="nomeCarregar">Nome do Personagem:</label>
                <input type="text" id="nomeCarregar" name="nomeCarregar" required>
                <br>
                <button type="button" onclick="carregarStatus()">Carregar</button>
                <h2>Listar Arquivos</h2>
                <button type="button" onclick="listarArquivos()">Listar Arquivos Salvos</button>
            </div>
            <div id="habilidades1" class="subcontent">
                <h2>Carregar Habilidades</h2>
                <div id="toggle-atualizar">
                    <label class="switch">
                        <input type="checkbox" id="atualizarhabilidade-checkbox">
                        <span class="slider round"></span>
                    </label>
                    <span class="toggle-label">Atualizar</span>
                </div>
                <label for="nomeCarregarHab">Nome do Personagem:</label>
                <input type="text" id="nomeCarregarHab" name="nomeCarregarHab" required>
                <br>
                <label for="nomeHabilidade">Nome da Habilidade:</label>
                <input type="text" id="nomeHabilidade" name="nomeHabilidade" required>
                <br>
            
                <label for="testeHabilidade">Teste de Habilidade:</label>
                <div class="teste-habilidade-container">
                    <div id="toggle-atualizar">
                        <input type="checkbox" id="toggleHabilidade">
                    </div>
            
                    <select id="atributoSelect">
                        <option value="vigor">Vigor</option>
                        <option value="força">Força</option>
                        <option value="destreza">Destreza</option>
                        <option value="inteligencia">Inteligencia</option>
                        <option value="espiritualidade">Espiritualidade</option>
                        <!-- Adicione mais opções conforme necessário -->
                    </select>
            
                    <select id="periciaSelect">
                        <!-- Físicas / Combate -->
                        <option value="acrobacia">Acrobacia</option>
                        <option value="luta">Luta</option>
                        <option value="pontaria">Pontaria</option>
                        <option value="bloqueio">Bloqueio</option>
                        <option value="reflexos">Reflexos</option>
                      
                        <!-- Misticismo -->
                        <option value="rituais">Rituais</option>
                        <option value="criptozoologia">Criptozoologia</option>
                        <option value="simbolismo">Simbolismo</option>
                        <option value="intuicao">Intuição</option>
                      
                        <!-- Acadêmicas -->
                        <option value="psicologia">Psicologia</option>
                        <option value="educacaoGeral">Educação Geral</option>
                        <option value="linguagens">Linguagens</option>
                        <option value="medicina">Medicina</option>
                        <option value="educacaoSuperior">Educação Superior</option>
                      
                        <!-- Criação -->
                        <option value="alquimia">Alquimia</option>
                        <option value="artesanatoEngenharia">Artesanato / Engenharia</option>
                        <option value="culinaria">Culinária</option>
                      
                        <!-- Interpessoais -->
                        <option value="persuasao">Persuasão</option>
                        <option value="intimidacao">Intimidação</option>
                        <option value="enganacao">Enganação</option>
                      
                        <!-- Ambiente -->
                        <option value="investigacao">Investigação</option>
                        <option value="sobrevivencia">Sobrevivência</option>
                        <option value="percepcao">Percepção</option>
                        <option value="lidarComAnimais">Lidar com Animais</option>
                      
                        <!-- Crime -->
                        <option value="furtividade">Furtividade</option>
                        <option value="prestidigitacao">Prestidigitação</option>
                    </select>                      
            
                    <input type="number" id="vantagensInput" placeholder="Vantagens">
                    <input type="number" id="modificadorInput" placeholder="Modificador">
                </div>
            
                <br>
                <label for="danoHabilidade">Dano:</label>
                <input type="text" id="danoHabilidade" name="danoHabilidade" required>
                <br>
                <label for="cooldownHabilidade">Cooldown:</label>
                <input type="number" id="cooldownHabilidade" name="cooldownHabilidade" required>
                <br>
                <label for="custoHabilidade">Custo:</label>
                <input type="text" id="custoHabilidade" name="custoHabilidade" required>
                <br>
                <label for="custoVida">Custo Vida:</label>
                <input type="text" id="custoVidaHabilidade" name="custoVida" required>
                <br>
                <label for="descricaoHabilidade">Descrição:</label>
                <textarea id="descricaoHabilidade" name="descricaoHabilidade" required></textarea>
                <br>
                <button type="button" onclick="carregarHabilidades2()">Carregar Habilidade</button>
            
                <!-- Nova seção para remover habilidade -->
                <div id="removerHabilidadeContainer" style="margin-top:20px; padding-top:10px; border-top:1px solid #ccc;">
                    <h3>Remover Habilidade</h3>
                    <label for="nomeRemoverHab">Nome do Personagem:</label>
                    <input type="text" id="nomeRemoverHab" name="nomeRemoverHab" required>
                    <br>
                    <label for="nomeRemoverHabilidade">Nome da Habilidade:</label>
                    <input type="text" id="nomeRemoverHabilidade" name="nomeRemoverHabilidade" required>
                    <br>
                    <button type="button" onclick="removerHabilidade()">Remover Habilidade</button>
                </div>
            </div>
            <div id="habilidades2" class="subcontent">
                <h2>Exportar e Importar Data</h2>
                <br>
                <input type="text" id="nomeArquivoExportar" placeholder="Nome do arquivo para exportar">
                <button type="button" onclick="exportarArquivo()">Exportar Arquivo</button>
                <br><br>
                <input type="file" id="inputArquivoImportar">
                <button type="button" onclick="importarArquivo()">Importar Arquivo</button>
                <br><br>
                <input type="text" id="nomeArquivoRemover" placeholder="Nome do arquivo para remover">
                <button type="button" onclick="removerArquivo()">Remover Arquivo</button>
                <br><br>
                <button type="button" onclick="listarArquivos()">Listar Arquivos no LocalStorage</button>
                <br>
                <hr>
                <h2>Atualizar Site</h2>
                Aperte esse botão para atualizar o site e carregar os dados mais recentes.<br>
                Aviso: ele vai apagar seus dados entao tenha certeza de fazer um backup antes.<br>
                <br>
                <button id="clear-data-btn">Apagar Dados e Recarregar</button>
                <hr><br>
                <!-- Seção para ativar/desativar modo Admin -->
                <h2>Modo Administrador</h2>
                <input type="password" id="senhaAdmin" placeholder="Digite a senha de admin">
                <button type="button" onclick="ativarAdmin()">Ativar Admin</button>
                <button type="button" onclick="desativarAdmin()">Desativar Admin</button>
                <p id="adminStatus" style="color: green;"></p>
            </div>  
            <div id="Google" class="subcontent">
                <div class="title">Backup To Google Drive</div>

                <div id="loader" class="loader-overlay">
                    <div class="loader"></div>
                </div>                
                
                <!-- Botões de autenticação -->
                <div class="auth-buttons">
                    <button class="signin">Sign In</button>
                    <button class="signout" style="display: none;">Sign Out</button>
                </div>
                
                <!-- Adicionado: exibição do nome e imagem do usuário -->
                <div class="user-info" style="display: none; margin-top: 10px;">
                    <img src="" alt="User Icon" class="user-icon" style="width: 32px; height: 32px; border-radius: 50%; margin-right: 5px;">
                    <span class="user-name"></span>
                </div>
            
                <!-- Botão de sincronização separado -->
                <div class="sync-container">
                    <button class="sync">Sync</button>
                    <button class="restore">Restaurar backup</button>
                </div>
                <p class="last-sync" style="display: none; margin-top: 10px; font-size: 14px; color: #555;"></p>
            </div>                                                                                                                           
        </div>            
            
        <!-- Seção de Inventário -->
        <div id="inventory" class="content">
            <h2>Inventário</h2>
            <div id="inventory-items">
            <!-- Os itens serão adicionados dinamicamente aqui -->
            </div>
            <button id="open-add-item">Adicionar Item</button>
            <div id="total-weight"></div>
        </div>
        
        <!-- Modal para adicionar novo item -->
        <div id="add-item-modal" class="modal" style="display: none;">
            <div class="modal-content">
            <h3>Adicionar Novo Item</h3>
            
            <label for="item-name">Nome:</label>
            <input type="text" id="item-name" placeholder="Nome do item">
            
            <label for="item-icon">Ícone (URL ou caminho):</label>
            <input type="text" id="item-icon" placeholder="Caminho do ícone">
            
            <label for="item-damage">Dano:</label>
            <input type="text" id="item-damage" placeholder="Dano">
            
            <label for="item-description">Descrição:</label>
            <textarea id="item-description" placeholder="Descrição do item"></textarea>
            
            <label for="item-peso">Peso:</label>
            <input type="number" id="item-peso" placeholder="Peso">
            
            <label for="item-quantity">Quantidade:</label>
            <input type="number" id="item-quantity" placeholder="Quantidade">
            
            <label for="item-single-use">Item de Uso Único:</label><br>
            <input type="checkbox" id="item-single-use">

            <div class="modal-buttons">
                <button id="submit-item">Adicionar</button>
                <button id="cancel-item">Cancelar</button>
            </div>
            </div>
        </div>

        <!-- Modal para exibir detalhes do item -->
        <div id="item-details-modal" class="modal" style="display: none;">
            <div class="modal-content">
            <h3 id="detail-item-name">Nome do Item</h3>
            <img id="detail-item-icon" src="" alt="Ícone do Item" class="item-icon">
            <p><strong>Dano:</strong> <span id="detail-item-damage"></span></p>
            <p><strong>Descrição:</strong> <span id="detail-item-description"></span></p>
            <p><strong>Peso:</strong> <span id="detail-item-peso"></span></p>
            <p><strong>Quantidade:</strong> <span id="detail-item-quantity"></span></p>
            <div class="modal-buttons">
                <button id="use-item-button">Usar</button>
                <button id="close-details-button">Fechar</button>
            </div>
            </div>
        </div>

        
        <!-- Actions Section with Subtabs -->
        <div id="actions" class="content">
            <div class="subtabs">
                <div class="subtab active" onclick="openSubtab('actions', 'acoes')">Ações</div>
                <div class="subtab" onclick="openSubtab('actions', 'ajustes')">Ajustes</div>
                <div class="subtab" onclick="openSubtab('actions', 'testes')">Testes</div>
            </div>
            <div id="acoes" class="subcontent active">
                <!-- Pré-visualização do Inventário -->
                <div id="inventory-preview" class="inventory-preview">
                    <h3>Selecione o item para atacar</h3>
                    <div class="slider-container">
                    <!-- Os itens do inventário serão inseridos dinamicamente aqui -->
                    </div>
                </div>
                <h2>Atacar</h2>
                <label for="vantagens-ataque">Número de Vantagens:</label>
                <input type="number" id="vantagens-ataque" value="0">
                <br>
                <label for="modificador-ataque">Modificador:</label>
                <input type="number" id="modificador-ataque" value="0">
                <br>
                <button onclick="executarAtaque()">Executar Ataque</button>

                <h2>Atirar</h2>
                <label for="vantagens-tiro">Número de Vantagens:</label>
                <input type="number" id="vantagens-tiro" value="0">
                <br>
                <label for="modificador-tiro">Modificador:</label>
                <input type="number" id="modificador-tiro" value="0">
                <br>
                <button onclick="executarTiro()">Executar Tiro</button>

                <h2>Defender</h2>
                <label for="vantagens-sanidade">Número de Vantagens:</label>
                <input type="number" id="vantagens-sanidade" value="0">
                <br>
                <label for="modificador-sanidade">Modificador:</label>
                <input type="number" id="modificador-sanidade" value="0">
                <br>
                <div id="check-sanidade">
                <button onclick="executarSanidade()">Executar Sanidade</button>
                    <input type="checkbox" id="checkSanidade" checked>
                    <label for="checkSanidade">Sanidade Total</label>  </div>
                <h2>Esquivar</h2>
                <label for="vantagens-esquiva">Número de Vantagens:</label>
                <input type="number" id="vantagens-esquiva" value="0">
                <br>
                <label for="modificador-esquiva">Modificador:</label>
                <input type="number" id="modificador-esquiva" value="0">
                <br>
                <button onclick="executarEsquiva()">Executar Esquiva</button>
                
                <h2>Contra-Atacar</h2>
                <label for="vantagens-contraataque">Número de Vantagens:</label>
                <input type="number" id="vantagens-contraataque" value="0">
                <br>
                <label for="modificador-contraataque">Modificador:</label>
                <input type="number" id="modificador-contraataque" value="0">
                <br>
                <button onclick="executarContraAtaque()">Executar Contra-Ataque</button>
            </div>
            <div id="ajustes" class="subcontent">
                <h2>Ajuste Éter:</h2>
                <input type="text" id="ajuste-eter" />
                <button onclick="ajustarÉter(1)">Adicionar Éter</button>
                <button onclick="ajustarÉter(-1)">Reduzir Éter</button>
                <h2>Ajuste Vida:</h2>
                <input type="text" id="ajuste-vida" />
                <button onclick="ajustarVida(1)">Adicionar Vida</button>
                <button onclick="ajustarVida(-1)">Reduzir Vida</button>
                <h2>Ajuste Sanidade:</h2>
                <input type="text" id="ajuste-sanidade" />
                <button onclick="ajustarSanidade(1)">Adicionar Sanidade</button>
                <button onclick="ajustarSanidade(-1)">Reduzir Sanidade</button>
                <h2>Ajuste Defesa:</h2>
                <input type="text" id="ajuste-defesa" />
                <button onclick="ajustarDefesa(1)">Adicionar Defesa</button>
                <button onclick="ajustarDefesa(-1)">Reduzir Defesa</button>
                <!-- Outros elementos da interface, se houver -->
                <h2>Sair:</h2>
                <button onclick="sairAjustes()">Sair dos Ajustes</button>
            </div>
            <div id="testes" class="subcontent">
                <!-- Pré-visualização do Inventário -->
                <div id="inventory-preview-testes" class="inventory-preview">
                    <h3>Selecione o item para atacar</h3>
                    <div class="slider-container">
                        <!-- Os itens do inventário serão inseridos dinamicamente aqui -->
                    </div>
                </div>
                <label for="atributo">Atributo:</label>
                <select id="atributoSelect1">
                    <option value="vigor">Vigor</option>
                    <option value="força">Força</option>
                    <option value="destreza">Destreza</option>
                    <option value="inteligencia">Inteligencia</option>
                    <option value="espiritualidade">Espiritualidade</option>
                    <!-- Adicione mais opções conforme necessário -->
                </select><br><br>
        
                <label for="pericia">Perícia:</label>
                <select id="periciaSelect1">
                    <!-- Físicas / Combate -->
                    <option value="acrobacia">Acrobacia</option>
                    <option value="luta">Luta</option>
                    <option value="pontaria">Pontaria</option>
                    <option value="bloqueio">Bloqueio</option>
                    <option value="reflexos">Reflexos</option>
                  
                    <!-- Misticismo -->
                    <option value="rituais">Rituais</option>
                    <option value="criptozoologia">Criptozoologia</option>
                    <option value="simbolismo">Simbolismo</option>
                    <option value="intuicao">Intuição</option>
                  
                    <!-- Acadêmicas -->
                    <option value="psicologia">Psicologia</option>
                    <option value="educacaoGeral">Educação Geral</option>
                    <option value="linguagens">Linguagens</option>
                    <option value="medicina">Medicina</option>
                    <option value="educacaoSuperior">Educação Superior</option>
                  
                    <!-- Criação -->
                    <option value="alquimia">Alquimia</option>
                    <option value="artesanatoEngenharia">Artesanato / Engenharia</option>
                    <option value="culinaria">Culinária</option>
                  
                    <!-- Interpessoais -->
                    <option value="persuasao">Persuasão</option>
                    <option value="intimidacao">Intimidação</option>
                    <option value="enganacao">Enganação</option>
                  
                    <!-- Ambiente -->
                    <option value="investigacao">Investigação</option>
                    <option value="sobrevivencia">Sobrevivência</option>
                    <option value="percepcao">Percepção</option>
                    <option value="lidarComAnimais">Lidar com Animais</option>
                  
                    <!-- Crime -->
                    <option value="furtividade">Furtividade</option>
                    <option value="prestidigitacao">Prestidigitação</option>
                </select><br><br>
        
                <label for="vantagens">Vantagens:</label>
                <input type="number" id="vantagensInput1" value="0"><br><br>
            
                <label for="modificador">Modificador:</label>
                <input type="number" id="modificadorInput1" value="0"><br><br>
            
                <button onclick="executarAcao()">Executar Ação</button>
            </div>
        </div> 
    </div>                                               
        <script src="https://apis.google.com/js/api.js" defer></script>
        <script>
            function handleGisLoaded() {
                    if (typeof gisLoaded === 'function') {
                        gisLoaded();
                    } else {
                        console.error("Função gisLoaded não carregada corretamente.");
                    }
            }
        </script>
        <script src="google.js?v=1.0.11" defer></script>
        <script src="youtube.js?v=1.0.11" defer></script>
        <script src="https://accounts.google.com/gsi/client" async defer onload="handleGisLoaded()"></script>        
        <script src="script.js?v=1.0.9" defer></script>  <!-- Carregar script.js antes de chat.js -->
        <script src="map.js?v=1.0.2" defer></script>
        <script src="inventario.js?=1.0.2" defer></script> 
        <script src="https://cdn.jsdelivr.net/npm/markdown-it/dist/markdown-it.min.js"></script>  
    </body>
  </html>
